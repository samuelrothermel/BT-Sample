<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Braintree Custom Checkout (with vaulting) Demo</title>
    <link rel="stylesheet" href="vaulted-payments.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Custom Vaulted Payments Demo</h1>
            <p>Full Stack Integration supporting Payment Method Vaulting</p>
            <a href="index.html" class="back-link">← Back to Samples</a>
        </header>

        <main>
            <div class="payment-form">
                <h2>Payment Information</h2>
                
                <!-- Info section about vaulting -->
                <div class="vault-info">
                    <details>
                        <summary>ℹAbout Vaulted Payments</summary>
                        <div class="vault-info-content">
                            <p><strong>What is Vaulting?</strong></p>
                            <p>Vaulting allows you to securely store a customer's payment method for future use without requiring them to re-authenticate or re-enter their information.</p>
                            
                            <p><strong>This Demo Shows:</strong></p>
                            <ul>
                                <li><strong>PayPal Vault Flow:</strong> Store PayPal billing agreements for future payments</li>
                                <li><strong>Hosted Fields:</strong> Store credit card information securely</li>
                                <li><strong>Venmo:</strong> Store Venmo payment methods securely</li>
                                <li><strong>Google Pay:</strong> Store Google Pay payment methods securely</li>
                                <li><strong>Apple Pay:</strong> Store Apple Pay payment methods securely</li>
                                <li><strong>Transaction Processing:</strong> Process initial payment while storing the payment method</li>
                            </ul>
                            
                            <p><strong>Note:</strong> The PayPal vault flow creates a billing agreement without displaying transaction currency/amount to the customer during the consent flow.</p>
                        </div>
                    </details>
                </div>
                
                <!-- Amount input -->
                <div class="form-group">
                    <label for="amount">Initial Payment Amount ($)</label>
                    <input type="number" id="amount" min="0.01" step="0.01" value="25.00" required>
                    <small class="field-note">This amount will be charged immediately and the payment method will be saved for future use.</small>
                </div>

                <!-- Hosted Fields form -->
                <form id="payment-form">
                    <!-- Cardholder Name -->
                    <div class="form-group">
                        <label for="cardholder-name">Cardholder Name</label>
                        <input type="text" id="cardholder-name" placeholder="John Doe" value="John Doe" required>
                    </div>

                    <div class="form-group">
                        <label for="card-number">Card Number</label>
                        <div id="card-number" class="hosted-field"></div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="expiration-date">Expiration Date</label>
                            <div id="expiration-date" class="hosted-field"></div>
                        </div>
                        
                        <div class="form-group">
                            <label for="cvv">CVV</label>
                            <div id="cvv" class="hosted-field"></div>
                        </div>
                    </div>

                    <!-- Billing Address Section -->
                    <div class="billing-address-section">
                        <h3>Billing Address</h3>
                        
                        <div class="form-group">
                            <label for="billing-street-address">Street Address</label>
                            <input type="text" id="billing-street-address" placeholder="123 Main St" value="123 Main St" required>
                        </div>

                        <div class="form-group">
                            <label for="billing-extended-address">Apartment, Suite, etc. (Optional)</label>
                            <input type="text" id="billing-extended-address" placeholder="Apt 4B" value="">
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="billing-locality">City</label>
                                <input type="text" id="billing-locality" placeholder="Chicago" value="Chicago" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="billing-region">State</label>
                                <input type="text" id="billing-region" placeholder="IL" value="IL" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="postal-code">Postal Code</label>
                                <div id="postal-code" class="hosted-field"></div>
                            </div>
                            
                            <div class="form-group">
                                <label for="billing-country">Country</label>
                                <select id="billing-country" required>
                                    <option value="US" selected>United States</option>
                                    <option value="CA">Canada</option>
                                    <option value="GB">United Kingdom</option>
                                    <option value="AU">Australia</option>
                                    <option value="DE">Germany</option>
                                    <option value="FR">France</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <button type="submit" id="submit-button" disabled>
                        <span class="button-text">Pay & Save Card</span>
                        <span class="loading-spinner" style="display: none;">Processing...</span>
                    </button>
                </form>

                <!-- Payment divider -->
                <div class="payment-divider">
                    <span>or pay with</span>
                </div>

                <!-- PayPal Vault Button -->
                <div class="alternative-payment-method">
                    <div class="paypal-vault-info">
                        <h3>PayPal Vault Flow</h3>
                        <p>This will create a PayPal billing agreement and process your initial payment. You'll be able to use this saved payment method for future purchases without re-authenticating.</p>
                    </div>
                    <div id="paypal-button" class="payment-button-container"></div>
                </div>

                <!-- Venmo Button -->
                <div class="alternative-payment-method">
                    <div class="venmo-vault-info">
                        <h3>Venmo with Vaulting</h3>
                        <p>Process your payment with Venmo and save the payment method for future use. On desktop, you'll scan a QR code with your mobile Venmo app. On mobile, you'll be redirected to the Venmo app or web login.</p>
                    </div>
                    <div id="venmo-button" class="payment-button-container"></div>
                </div>

                <!-- Google Pay Button -->
                <div class="alternative-payment-method">
                    <div class="googlepay-vault-info">
                        <h3>Google Pay with Vaulting</h3>
                        <p>Use Google Pay for quick checkout and save your selected payment method for future purchases without re-authentication.</p>
                    </div>
                    <div id="googlepay-button" class="payment-button-container"></div>
                </div>

                <!-- Apple Pay Button -->
                <div class="alternative-payment-method">
                    <div class="applepay-vault-info">
                        <h3>Apple Pay with Vaulting</h3>
                        <p>Use Apple Pay for secure and convenient checkout while saving your selected payment method for future purchases. Works on Safari with Touch ID, Face ID, or Apple Watch.</p>
                    </div>
                    <div id="applepay-button" class="payment-button-container"></div>
                </div>

                <!-- Results -->
                <div id="result" class="result"></div>
            </div>
        </main>
    </div>

    <!-- Google Pay API -->
    <script async src="https://pay.google.com/gp/p/js/pay.js"></script>
    
    <!-- Braintree Client SDK -->
    <script src="https://js.braintreegateway.com/web/3.97.2/js/client.min.js"></script>
    <script src="https://js.braintreegateway.com/web/3.97.2/js/hosted-fields.min.js"></script>
    <script src="https://js.braintreegateway.com/web/3.97.2/js/paypal-checkout.min.js"></script>
    <script src="https://js.braintreegateway.com/web/3.97.2/js/venmo.min.js"></script>
    <script src="https://js.braintreegateway.com/web/3.97.2/js/google-payment.min.js"></script>
    <script src="https://js.braintreegateway.com/web/3.97.2/js/apple-pay.min.js"></script>
    
    <!-- Custom JavaScript -->
    <script src="vaulted-payments.js"></script>
</body>
</html>